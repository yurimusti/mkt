{"ast":null,"code":"import _defineProperty from \"/home/solides/profiler-events/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/home/solides/profiler-events/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/solides/profiler-events/src/containers/profiler/profiler.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Fragment, useState, useEffect } from \"react\";\nimport Container from \"../../components/profiler/container\";\nimport Row from \"../../components/profiler/row\";\nimport Welcome from \"../../components/profiler/welcome\";\nimport FormProfilerRegister from \"../../components/forms/profilerRegisterForm\";\nimport Header from \"../../components/profiler/header\";\nimport Section from \"../../components/profiler/section\";\nimport Smart from \"../../assets/images/solides.png\";\nimport StepOne from \"../../components/profiler/steps/stepOne\";\nimport StepTwo from \"../../components/profiler/steps/stepTwo\";\nimport Result from \"./resultProfilerNoAuth\";\nimport ColorfulDash from \"../../components/colorfulDash\";\nimport { notification } from \"antd\";\nimport \"./index.scss\";\nimport * as passportsService from \"../../state/profiler/services\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\n\nfunction Profiler({\n  passportGetByToken,\n  passportPostByToken,\n  history\n}) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        blockStep = _useState2[0],\n        setBlockStep = _useState2[1];\n\n  const dateNow = new Date();\n  const url = window.location.href.split(\"/\");\n\n  const _useState3 = useState(0),\n        _useState4 = _slicedToArray(_useState3, 2),\n        step = _useState4[0],\n        setStep = _useState4[1];\n\n  const _useState5 = useState({}),\n        _useState6 = _slicedToArray(_useState5, 2),\n        registerData = _useState6[0],\n        setRegisterData = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        iAmChosenAdjectives = _useState8[0],\n        setArrayAdjectives = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        shouldBeChosenAdjectives = _useState10[0],\n        setArrayPerception = _useState10[1];\n\n  const _useState11 = useState(false),\n        _useState12 = _slicedToArray(_useState11, 2),\n        linkGeneric = _useState12[0],\n        setLinkGeneric = _useState12[1];\n\n  const _useState13 = useState([]),\n        _useState14 = _slicedToArray(_useState13, 2),\n        getPassport = _useState14[0],\n        setGetPassport = _useState14[1];\n\n  const _useState15 = useState(false),\n        _useState16 = _slicedToArray(_useState15, 2),\n        canJumpStepFinal = _useState16[0],\n        setCanJumpStepFinal = _useState16[1];\n\n  const _useState17 = useState(false),\n        _useState18 = _slicedToArray(_useState17, 2),\n        canGetResultProfiler = _useState18[0],\n        canSetResultProfiler = _useState18[1];\n\n  const _useState19 = useState({}),\n        _useState20 = _slicedToArray(_useState19, 2),\n        profiler = _useState20[0],\n        setProfiler = _useState20[1];\n\n  const _useState21 = useState({}),\n        _useState22 = _slicedToArray(_useState21, 2),\n        infoUser = _useState22[0],\n        setInfoUser = _useState22[1];\n\n  const _useState23 = useState({}),\n        _useState24 = _slicedToArray(_useState23, 2),\n        testStartTime = _useState24[0],\n        setTestStartTime = _useState24[1];\n\n  const nextStep = () => {\n    setStep(step + 1);\n  };\n\n  async function fetchGetPassportByToken() {\n    await passportGetByToken(url[4]).then(r => {\n      setGetPassport(r.data);\n\n      if (r.data.result !== undefined) {\n        setProfiler(r.data.result);\n        setInfoUser(r.data);\n        setStep(3);\n        setLinkGeneric(true);\n      }\n    }).catch(err => {\n      if (err) {\n        notification.error({\n          message: \"Erro referente ao passaporte\",\n          description: \"\".concat(err)\n        });\n      } else {\n        history.push(\"/peopleAnalytics\");\n      }\n    });\n  }\n\n  useEffect(() => {\n    fetchGetPassportByToken();\n  }, []);\n  useEffect(() => {\n    if (registerData !== {}) {\n      setTestStartTime(dateNow.getFullYear() + \"-\" + dateNow.getMonth() + \"-\" + dateNow.getDay() + \"-\" + dateNow.getFullYear() + \" \" + dateNow.getHours() + \":\" + dateNow.getMinutes() + \":\" + dateNow.getSeconds());\n    }\n  }, [registerData]);\n\n  const _handleClick = obj3 => {\n    const obj1 = {\n      iAmChosenAdjectives,\n      testStartTime,\n      testEndTime: dateNow.getFullYear() + \"-\" + dateNow.getMonth() + \"-\" + dateNow.getDay() + \"-\" + dateNow.getFullYear() + \" \" + dateNow.getHours() + \":\" + dateNow.getMinutes() + \":\" + dateNow.getSeconds()\n    };\n    const obj2 = registerData;\n\n    const result = _objectSpread({}, obj1, {}, obj2, {\n      shouldBeChosenAdjectives: obj3\n    });\n\n    setBlockStep(true);\n    passportPostByToken(url[4], result).then(res => {\n      if (res.status === 200 && res.data.result !== undefined) {\n        canSetResultProfiler(true);\n        setProfiler(res.data.result);\n        setInfoUser(res.data);\n        setLinkGeneric(false);\n      } else if (res.status === 200 && res.data.result === undefined) {\n        canSetResultProfiler(\"noProfiler\");\n      } else {\n        canSetResultProfiler(false);\n        setLinkGeneric(false);\n      }\n    }).catch(err => {\n      notification.error({\n        message: \"Erro referente ao token\",\n        description: \"\".concat(err)\n      });\n    });\n  };\n\n  useEffect(() => {\n    if (canGetResultProfiler === true) {\n      nextStep();\n    } else if (canGetResultProfiler === \"noProfiler\") {\n      console.log(\"SUCESSO - SEM RELATÃ“RIO\");\n    }\n  }, [canGetResultProfiler]);\n\n  const _wizardStep = () => {\n    switch (step) {\n      case 0:\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, step === 0 && React.createElement(\"div\", {\n          className: \"profiler-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, React.createElement(ColorfulDash, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }), React.createElement(Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          className: \"logoInitial\",\n          src: Smart,\n          alt: \"smart\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        })), React.createElement(Section, {\n          nameClass: \"welcome\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, React.createElement(Container, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, React.createElement(Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(Welcome, {\n          getPassport: getPassport,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        })))), React.createElement(Section, {\n          nameClass: \"form-profile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(Container, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, React.createElement(FormProfilerRegister, {\n          getPassport: getPassport,\n          handleSubmit: nextStep,\n          registerFallback: value => setRegisterData(value),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 167\n          },\n          __self: this\n        })))));\n\n      case 1:\n        return React.createElement(\"div\", {\n          className: \"profiler-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, step === 1 && React.createElement(StepOne, {\n          dataFallbackArr: value => setArrayAdjectives(value),\n          dataFallbackJumpToStepTwo: value => {\n            if (!value) {\n              setStep(2);\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182\n          },\n          __self: this\n        }));\n\n      case 2:\n        return React.createElement(\"div\", {\n          className: \"profiler-container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, step === 2 && React.createElement(StepTwo, {\n          dataFallbackArr: value => {\n            setArrayPerception(value);\n          },\n          dataFallBackFinish: value => {\n            setCanJumpStepFinal(value);\n          },\n          handleClick: _handleClick,\n          blockStep: blockStep,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }));\n\n      case 3:\n        return React.createElement(Result, {\n          profiler: profiler,\n          canShowAll: linkGeneric,\n          infoUser: infoUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212\n          },\n          __self: this\n        });\n\n      default:\n        break;\n    }\n  };\n\n  return _wizardStep();\n}\n\nconst mapStateToProps = state => ({// modal: state.user.modal\n});\n\nconst mapDispatchToProps = {\n  passportGetByToken: passportsService.passportGetByToken,\n  passportPostByToken: passportsService.passportPostByToken\n};\nexport default compose(withRouter, connect(mapStateToProps, mapDispatchToProps))(Profiler);","map":{"version":3,"sources":["/home/solides/profiler-events/src/containers/profiler/profiler.js"],"names":["React","Fragment","useState","useEffect","Container","Row","Welcome","FormProfilerRegister","Header","Section","Smart","StepOne","StepTwo","Result","ColorfulDash","notification","passportsService","connect","withRouter","compose","Profiler","passportGetByToken","passportPostByToken","history","blockStep","setBlockStep","dateNow","Date","url","window","location","href","split","step","setStep","registerData","setRegisterData","iAmChosenAdjectives","setArrayAdjectives","shouldBeChosenAdjectives","setArrayPerception","linkGeneric","setLinkGeneric","getPassport","setGetPassport","canJumpStepFinal","setCanJumpStepFinal","canGetResultProfiler","canSetResultProfiler","profiler","setProfiler","infoUser","setInfoUser","testStartTime","setTestStartTime","nextStep","fetchGetPassportByToken","then","r","data","result","undefined","catch","err","error","message","description","push","getFullYear","getMonth","getDay","getHours","getMinutes","getSeconds","_handleClick","obj3","obj1","testEndTime","obj2","res","status","console","log","_wizardStep","value","mapStateToProps","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\nimport Container from \"../../components/profiler/container\";\nimport Row from \"../../components/profiler/row\";\nimport Welcome from \"../../components/profiler/welcome\";\nimport FormProfilerRegister from \"../../components/forms/profilerRegisterForm\";\nimport Header from \"../../components/profiler/header\";\nimport Section from \"../../components/profiler/section\";\nimport Smart from \"../../assets/images/solides.png\";\nimport StepOne from \"../../components/profiler/steps/stepOne\";\nimport StepTwo from \"../../components/profiler/steps/stepTwo\";\nimport Result from \"./resultProfilerNoAuth\";\nimport ColorfulDash from \"../../components/colorfulDash\";\nimport { notification } from \"antd\";\nimport \"./index.scss\";\n\nimport * as passportsService from \"../../state/profiler/services\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport { compose } from \"recompose\";\n\nfunction Profiler({ passportGetByToken, passportPostByToken, history }) {\n  const [blockStep, setBlockStep] = useState(false);\n  const dateNow = new Date();\n  const url = window.location.href.split(\"/\");\n  const [step, setStep] = useState(0);\n  const [registerData, setRegisterData] = useState({});\n  const [iAmChosenAdjectives, setArrayAdjectives] = useState([]);\n  const [shouldBeChosenAdjectives, setArrayPerception] = useState([]);\n  const [linkGeneric, setLinkGeneric] = useState(false);\n  const [getPassport, setGetPassport] = useState([]);\n  const [canJumpStepFinal, setCanJumpStepFinal] = useState(false);\n  const [canGetResultProfiler, canSetResultProfiler] = useState(false);\n  const [profiler, setProfiler] = useState({});\n  const [infoUser, setInfoUser] = useState({});\n  const [testStartTime, setTestStartTime] = useState({});\n\n  const nextStep = () => {\n    setStep(step + 1);\n  };\n\n  async function fetchGetPassportByToken() {\n    await passportGetByToken(url[4])\n      .then(r => {\n        setGetPassport(r.data);\n        if (r.data.result !== undefined) {\n          setProfiler(r.data.result);\n          setInfoUser(r.data);\n          setStep(3);\n          setLinkGeneric(true);\n        }\n      })\n      .catch(err => {\n        if (err) {\n          notification.error({\n            message: \"Erro referente ao passaporte\",\n            description: `${err}`\n          });\n        } else {\n          history.push(\"/peopleAnalytics\");\n        }\n      });\n  }\n\n  useEffect(() => {\n    fetchGetPassportByToken();\n  }, []);\n\n\n  useEffect(() => {\n    if (registerData !== {}) {\n      setTestStartTime(\n        dateNow.getFullYear() +\n          \"-\" +\n          dateNow.getMonth() +\n          \"-\" +\n          dateNow.getDay() +\n          \"-\" +\n          dateNow.getFullYear() +\n          \" \" +\n          dateNow.getHours() +\n          \":\" +\n          dateNow.getMinutes() +\n          \":\" +\n          dateNow.getSeconds()\n      );\n    }\n  }, [registerData]);\n\n  const _handleClick = obj3 => {\n    const obj1 = {\n      iAmChosenAdjectives,\n      testStartTime,\n      testEndTime:\n        dateNow.getFullYear() +\n        \"-\" +\n        dateNow.getMonth() +\n        \"-\" +\n        dateNow.getDay() +\n        \"-\" +\n        dateNow.getFullYear() +\n        \" \" +\n        dateNow.getHours() +\n        \":\" +\n        dateNow.getMinutes() +\n        \":\" +\n        dateNow.getSeconds()\n    };\n    const obj2 = registerData;\n    const result = {\n      ...obj1,\n      ...obj2,\n      shouldBeChosenAdjectives: obj3\n    };\n\n    setBlockStep(true);\n\n    passportPostByToken(url[4], result)\n      .then(res => {\n        if (res.status === 200 && res.data.result !== undefined) {\n          canSetResultProfiler(true);\n          setProfiler(res.data.result);\n          setInfoUser(res.data);\n          setLinkGeneric(false);\n        } else if (res.status === 200 && res.data.result === undefined) {\n          canSetResultProfiler(\"noProfiler\");\n        } else {\n          canSetResultProfiler(false);\n          setLinkGeneric(false);\n        }\n      })\n      .catch(err => {\n        notification.error({\n          message: \"Erro referente ao token\",\n          description: `${err}`\n        });\n      });\n  };\n\n  useEffect(() => {\n    if (canGetResultProfiler === true) {\n      nextStep();\n    } else if (canGetResultProfiler === \"noProfiler\") {\n      console.log(\"SUCESSO - SEM RELATÃ“RIO\");\n    }\n  }, [canGetResultProfiler]);\n\n  const _wizardStep = () => {\n    switch (step) {\n      case 0:\n        return (\n          <Fragment>\n            {step === 0 && (\n              <div className=\"profiler-container\">\n                <ColorfulDash />\n                <Header>\n                  <img className=\"logoInitial\" src={Smart} alt=\"smart\" />\n                </Header>\n                <Section nameClass={\"welcome\"}>\n                  <Container>\n                    <Row>\n                      <Welcome getPassport={getPassport} />\n                    </Row>\n                  </Container>\n                </Section>\n                <Section nameClass={\"form-profile\"}>\n                  <Container>\n                    <FormProfilerRegister\n                      getPassport={getPassport}\n                      handleSubmit={nextStep}\n                      registerFallback={value => setRegisterData(value)}\n                    />\n                  </Container>\n                </Section>\n              </div>\n            )}\n          </Fragment>\n        );\n      case 1:\n        return (\n          <div className=\"profiler-container\">\n            {step === 1 && (\n              <StepOne\n                dataFallbackArr={value => setArrayAdjectives(value)}\n                dataFallbackJumpToStepTwo={value => {\n                  if (!value) {\n                    setStep(2);\n                  }\n                }}\n              />\n            )}\n          </div>\n        );\n      case 2:\n        return (\n          <div className=\"profiler-container\">\n            {step === 2 && (\n              <StepTwo\n                dataFallbackArr={value => {\n                  setArrayPerception(value);\n                }}\n                dataFallBackFinish={value => {\n                  setCanJumpStepFinal(value);\n                }}\n                handleClick={_handleClick}\n                blockStep={blockStep}\n              />\n            )}\n          </div>\n        );\n      case 3:\n        return (\n          <Result\n            profiler={profiler}\n            canShowAll={linkGeneric}\n            infoUser={infoUser}\n          />\n        );\n      default:\n        break;\n    }\n  };\n\n  return _wizardStep();\n}\n\nconst mapStateToProps = state => ({\n  // modal: state.user.modal\n});\n\nconst mapDispatchToProps = {\n  passportGetByToken: passportsService.passportGetByToken,\n  passportPostByToken: passportsService.passportPostByToken\n};\n\nexport default compose(\n  withRouter,\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )\n)(Profiler);\n"]},"metadata":{},"sourceType":"module"}